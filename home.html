<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zynapse - Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emoji-picker/1.1.5/emoji-picker.min.css">
</head>
<body class="dark-theme">
    <!-- Main App -->
    <div id="app">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <button id="menu-toggle" class="icon-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="mobile-title">
                <img src="zynapse.png" alt="Zynapse" class="logo-tiny">
                <span>Zynapse</span>
            </div>
            <button id="new-chat-btn" class="icon-btn">
                <i class="fas fa-edit"></i>
            </button>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <img src="zynapse.png" alt="Zynapse" class="logo-small">
                    <div class="user-details">
                        <span id="current-user-name">User</span>
                        <span id="current-user-status" class="status online">Online</span>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <button id="status-toggle" class="icon-btn" title="Change Status">
                        <i class="fas fa-circle"></i>
                    </button>
                    <button id="settings-btn" class="icon-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>

            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="user-search" placeholder="Search chats, contacts...">
                    <button id="search-clear" class="icon-btn hidden">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="sidebar-tabs">
                <button class="tab-btn active" data-tab="chats">
                    <i class="fas fa-comment"></i>
                    <span>Chats</span>
                    <span class="unread-badge hidden" id="chats-badge">0</span>
                </button>
                <button class="tab-btn" data-tab="contacts">
                    <i class="fas fa-user-friends"></i>
                    <span>Contacts</span>
                    <span class="unread-badge hidden" id="contacts-badge">0</span>
                </button>
                <button class="tab-btn" data-tab="requests">
                    <i class="fas fa-user-plus"></i>
                    <span>Requests</span>
                    <span class="unread-badge hidden" id="requests-badge">0</span>
                </button>
            </div>

            <div class="sidebar-content">
                <!-- Chats Tab -->
                <div id="chats-tab" class="tab-content active">
                    <div class="chat-list" id="chat-list">
                        <!-- Chat items will be populated here -->
                        <div class="empty-state">
                            <i class="fas fa-comments"></i>
                            <p>No chats yet</p>
                            <button class="btn btn-primary" id="start-first-chat">Start a chat</button>
                        </div>
                    </div>
                </div>

                <!-- Contacts Tab -->
                <div id="contacts-tab" class="tab-content">
                    <div class="contact-list" id="contact-list">
                        <!-- Contact items will be populated here -->
                        <div class="empty-state">
                            <i class="fas fa-user-friends"></i>
                            <p>No contacts yet</p>
                            <button class="btn btn-primary" id="add-first-contact">Add a contact</button>
                        </div>
                    </div>
                </div>

                <!-- Requests Tab -->
                <div id="requests-tab" class="tab-content">
                    <div class="request-list" id="request-list">
                        <!-- Request items will be populated here -->
                        <div class="empty-state">
                            <i class="fas fa-user-plus"></i>
                            <p>No pending requests</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
            <!-- Empty State -->
            <div id="empty-chat" class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>No chat selected</h3>
                <p>Select a conversation from the sidebar or start a new chat</p>
                <button class="btn btn-primary" id="start-chat-empty">Start a chat</button>
            </div>

            <!-- Active Chat -->
            <div id="active-chat" class="hidden">
                <div class="chat-header">
                    <div class="chat-info">
                        <button id="back-to-chats" class="icon-btn mobile-only">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="chat-avatar">
                            <div class="avatar-placeholder"></div>
                            <span class="presence-indicator online"></span>
                        </div>
                        <div class="chat-details">
                            <h3 id="chat-with-name">User Name</h3>
                            <span id="chat-status" class="status">Online</span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button id="voice-call-btn" class="icon-btn" title="Voice call">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button id="video-call-btn" class="icon-btn" title="Video call">
                            <i class="fas fa-video"></i>
                        </button>
                        <button id="search-chat-btn" class="icon-btn" title="Search in chat">
                            <i class="fas fa-search"></i>
                        </button>
                        <button id="chat-info-btn" class="icon-btn" title="Chat info">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <div class="messages-container">
                    <div class="messages" id="messages">
                        <!-- Messages will be populated here -->
                    </div>
                    <div id="typing-indicator" class="typing-indicator hidden">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span id="typing-user">User is typing...</span>
                    </div>
                </div>

                <div class="message-input-container">
                    <div class="input-actions">
                        <button id="attach-btn" class="icon-btn" title="Attach file">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button id="emoji-btn" class="icon-btn" title="Emoji">
                            <i class="far fa-smile"></i>
                        </button>
                    </div>
                    <div class="message-input-wrapper">
                        <input type="text" id="message-input" placeholder="Type a message...">
                        <button id="voice-message-btn" class="icon-btn" title="Voice message">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <button id="send-btn" class="send-btn" title="Send message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Settings</h3>
                    <button id="close-settings" class="icon-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>Profile</h4>
                        <div class="profile-preview">
                            <div class="profile-avatar">
                                <img src="zynapse.png" alt="Profile" class="avatar-img">
                                <button class="edit-avatar-btn">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            <div class="profile-info">
                                <h5 id="profile-name">User Name</h5>
                                <p id="profile-username">@username</p>
                            </div>
                            <button id="edit-profile-btn" class="btn btn-secondary">Edit</button>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Account</h4>
                        <div class="settings-list">
                            <div class="setting-item" data-setting="privacy">
                                <i class="fas fa-lock"></i>
                                <div class="setting-details">
                                    <span class="setting-title">Privacy & Security</span>
                                    <span class="setting-description">Manage your privacy settings</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <div class="setting-item" data-setting="notifications">
                                <i class="fas fa-bell"></i>
                                <div class="setting-details">
                                    <span class="setting-title">Notifications</span>
                                    <span class="setting-description">Customize your notifications</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <div class="setting-item" data-setting="storage">
                                <i class="fas fa-database"></i>
                                <div class="setting-details">
                                    <span class="setting-title">Storage & Data</span>
                                    <span class="setting-description">Manage storage usage</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Preferences</h4>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Dark Mode</span>
                                <span class="setting-description">Use dark theme</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="dark-mode-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Message Sounds</span>
                                <span class="setting-description">Play sounds for new messages</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="message-sounds" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Read Receipts</span>
                                <span class="setting-description">Let others see when you've read their messages</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="read-receipts" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Support</h4>
                        <div class="settings-list">
                            <div class="setting-item" data-setting="help">
                                <i class="fas fa-question-circle"></i>
                                <div class="setting-details">
                                    <span class="setting-title">Help Center</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <div class="setting-item" data-setting="contact">
                                <i class="fas fa-headset"></i>
                                <div class="setting-details">
                                    <span class="setting-title">Contact Us</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <div class="setting-item" data-setting="about">
                                <i class="fas fa-info-circle"></i>
                                <div class="setting-details">
                                    <span class="setting-title">About Zynapse</span>
                                    <span class="setting-description">Version 2.0.1</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <button id="logout-btn" class="btn btn-secondary btn-full">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Chat Modal -->
        <div id="new-chat-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>New Chat</h3>
                    <button id="close-new-chat" class="icon-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="search-container">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="new-chat-search" placeholder="Search contacts...">
                        </div>
                    </div>
                    <div class="contact-list-modal" id="contact-list-modal">
                        <!-- Contacts for new chat will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Emoji Picker -->
        <div id="emoji-picker" class="emoji-picker hidden"></div>

        <!-- New Message Notification -->
        <div id="message-notification" class="notification hidden">
            <div class="notification-content">
                <div class="notification-avatar">
                    <div class="avatar-placeholder small"></div>
                </div>
                <div class="notification-text">
                    <strong id="notif-sender">User</strong>
                    <span id="notif-message">New message</span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <!-- Emoji Picker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/emoji-picker/1.1.5/emoji-picker.min.js"></script>
    
    <!-- App Script -->
    <script src="app.js"></script>
</body>
</html>
