<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zynapse - Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="zynapse.png">
</head>
<body class="dark-theme">
    <div id="app">
        <!-- Top Navigation Bar -->
        <div class="top-nav">
            <div class="nav-left">
                <div class="app-logo">
                    <img src="zynapse.png" alt="Zynapse Logo" class="logo-tiny">
                    <span class="app-name">Zynapse</span>
                </div>
            </div>
            
            <div class="nav-center">
                <div class="status-indicator">
                    <span id="global-status" class="status online">Online</span>
                </div>
            </div>
            
            <div class="nav-right">
                <button id="chats-btn" class="nav-btn active" title="Chats">
                    <i class="fas fa-comment"></i>
                </button>
                <button id="contacts-btn" class="nav-btn" title="Contacts">
                    <i class="fas fa-user-friends"></i>
                </button>
                <button id="requests-btn" class="nav-btn" title="Requests">
                    <i class="fas fa-user-plus"></i>
                    <span class="nav-badge hidden" id="requests-badge">0</span>
                </button>
                <button id="new-chat-btn" class="nav-btn" title="New Chat">
                    <i class="fas fa-edit"></i>
                </button>
                <button id="settings-btn" class="nav-btn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="user-menu">
                    <button id="user-menu-btn" class="user-avatar">
                        <div class="avatar-small" id="user-avatar">U</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Chats Panel -->
            <div id="chats-panel" class="content-panel active">
                <div class="panel-header">
                    <h3>Recent Chats</h3>
                    <div class="header-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="chats-search" placeholder="Search chats...">
                        </div>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="chat-list" id="chat-list">
                        <div class="empty-state">
                            <i class="fas fa-comments"></i>
                            <p>No chats yet</p>
                            <button class="btn btn-primary" id="start-first-chat">Start a chat</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contacts Panel -->
            <div id="contacts-panel" class="content-panel">
                <div class="panel-header">
                    <h3>Contacts</h3>
                    <div class="header-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="contacts-search" placeholder="Search contacts...">
                        </div>
                        <button id="add-contact-btn" class="btn btn-primary btn-small">
                            <i class="fas fa-plus"></i> Add
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="contact-list" id="contact-list">
                        <div class="empty-state">
                            <i class="fas fa-user-friends"></i>
                            <p>No contacts yet</p>
                            <button class="btn btn-primary" id="add-first-contact">Add a contact</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Requests Panel -->
            <div id="requests-panel" class="content-panel">
                <div class="panel-header">
                    <h3>Contact Requests</h3>
                </div>
                <div class="panel-content">
                    <div class="request-list" id="request-list">
                        <div class="empty-state">
                            <i class="fas fa-user-plus"></i>
                            <p>No pending requests</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Chat Area -->
            <div id="active-chat" class="hidden">
                <div class="chat-header">
                    <button id="back-to-chats" class="icon-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="chat-user-info">
                        <div class="chat-avatar">
                            <div class="avatar-small" id="active-chat-avatar">U</div>
                            <span class="presence-indicator online" id="active-chat-status"></span>
                        </div>
                        <div class="chat-user-details">
                            <h4 id="active-chat-name">User Name</h4>
                            <span id="active-chat-status-text" class="status">Online</span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button id="voice-call-btn" class="icon-btn" title="Voice call">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button id="video-call-btn" class="icon-btn" title="Video call">
                            <i class="fas fa-video"></i>
                        </button>
                        <button id="chat-info-btn" class="icon-btn" title="Chat info">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <div class="messages-container">
                    <div class="messages" id="messages">
                        <!-- Messages will be populated here -->
                    </div>
                    <div id="typing-indicator" class="typing-indicator hidden">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span id="typing-user">User is typing...</span>
                    </div>
                </div>

                <div class="message-input-container">
                    <div class="input-actions">
                        <button id="emoji-btn" class="icon-btn" title="Emoji">
                            <i class="far fa-smile"></i>
                        </button>
                        <button id="attach-btn" class="icon-btn" title="Attach file">
                            <i class="fas fa-paperclip"></i>
                        </button>
                    </div>
                    <div class="message-input-wrapper">
                        <textarea id="message-input" placeholder="Type a message..." rows="1"></textarea>
                        <button id="voice-message-btn" class="icon-btn" title="Voice message">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <button id="send-btn" class="send-btn" title="Send message" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <!-- New Chat Modal -->
        <div id="new-chat-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>New Chat</h3>
                    <button id="close-new-chat" class="icon-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="search-container">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="new-chat-search" placeholder="Search users...">
                        </div>
                    </div>
                    <div class="user-list-modal" id="user-list-modal">
                        <!-- Users will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Contact Modal -->
        <div id="add-contact-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Add Contact</h3>
            <button id="close-add-contact" class="icon-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="contact-search">Email Address or User ID</label>
                <input type="text" id="contact-search" placeholder="Enter user's email or User ID">
                <p class="input-hint">You can find User ID in the user's profile</p>
            </div>
            <div id="search-results" class="search-results hidden">
                <!-- Search results will appear here -->
            </div>
            <div class="form-group">
                <label for="contact-message">Message (Optional)</label>
                <textarea id="contact-message" placeholder="Add a personal message"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button id="cancel-add-contact" class="btn btn-secondary">Cancel</button>
            <button id="send-contact-request" class="btn btn-primary">Send Request</button>
        </div>
    </div>
</div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Settings</h3>
                    <button id="close-settings" class="icon-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                   <div class="settings-section">
    <h4>Profile</h4>
    <div class="profile-preview">
        <div class="profile-avatar">
            <div class="avatar-medium" id="settings-avatar">U</div>
        </div>
        <div class="profile-info">
            <h5 id="settings-name">User Name</h5>
            <p id="settings-username">@username</p>
            <p id="settings-phone">+1234567890</p>
            <p id="settings-email">user@example.com</p>
            <p class="user-id">User ID: <span id="settings-user-id">loading...</span></p>
        </div>
        <button id="edit-profile-btn" class="btn btn-secondary">Edit</button>
    </div>
</div>
                    
                    <div class="settings-section">
                        <h4>Status</h4>
                        <div class="status-options">
                            <button class="status-option active" data-status="online">
                                <span class="status-dot online"></span>
                                Online
                            </button>
                            <button class="status-option" data-status="away">
                                <span class="status-dot away"></span>
                                Away
                            </button>
                            <button class="status-option" data-status="busy">
                                <span class="status-dot busy"></span>
                                Busy
                            </button>
                            <button class="status-option" data-status="offline">
                                <span class="status-dot offline"></span>
                                Offline
                            </button>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Preferences</h4>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Dark Mode</span>
                                <span class="setting-description">Use dark theme</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="dark-mode-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Message Sounds</span>
                                <span class="setting-description">Play sounds for new messages</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="message-sounds" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item toggle-setting">
                            <div class="setting-details">
                                <span class="setting-title">Read Receipts</span>
                                <span class="setting-description">Let others see when you've read their messages</span>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="read-receipts" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <button id="logout-btn" class="btn btn-secondary btn-full">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Menu Dropdown -->
        <div id="user-menu-dropdown" class="dropdown hidden">
            <div class="dropdown-item" data-action="profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </div>
            <div class="dropdown-item" data-action="status">
                <i class="fas fa-circle"></i>
                <span>Status</span>
            </div>
            <div class="dropdown-item" data-action="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
            <div class="dropdown-divider"></div>
            <div class="dropdown-item" data-action="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </div>
        </div>

        <!-- Emoji Picker -->
        <div id="emoji-picker" class="emoji-picker hidden"></div>

        <!-- Notification -->
        <div id="message-notification" class="notification hidden">
            <div class="notification-content">
                <div class="notification-avatar">
                    <div class="avatar-small">U</div>
                </div>
                <div class="notification-text">
                    <strong id="notif-sender">User</strong>
                    <span id="notif-message">New message</span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Online Users Indicator -->
        <div id="online-users" class="online-users hidden">
            <div class="online-users-header">
                <span>Online Now</span>
                <span id="online-count">0</span>
            </div>
            <div class="online-users-list" id="online-users-list">
                <!-- Online users will be populated here -->
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <!-- App Script -->
    <script src="app.js"></script>
</body>
</html>
