<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zynapse - Secure Messaging</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="zynaps.png">
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <img src="zynaps.png" alt="Zynapse" class="loading-logo">
            <div class="spinner-large"></div>
            <p>Initializing Zynapse...</p>
        </div>
    </div>

    <div class="auth-page" id="authPage">
        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcomeScreen">
            <img src="zynaps.png" alt="Zynapse" class="logo-large">
            <h1>Zynapse</h1>
            <p class="tagline">Secure, real-time messaging with end-to-end encryption</p>
            <p class="tagline">Connect instantly with friends, family, and colleagues</p>
            <p class="powered-by">Powered by Buffer Zone Technology</p>
            
            <div class="welcome-actions">
                <button class="btn-primary full-width" id="signupBtn">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
                <button class="btn-secondary full-width" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
            </div>
            
            <div class="welcome-footer">
                <p>By continuing, you agree to our <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a></p>
            </div>
        </div>

        <!-- Sign Up Form -->
        <div class="auth-form" id="signupForm" style="display: none;">
            <div class="auth-header">
                <button class="back-btn" id="backToWelcomeFromSignup">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <img src="zynaps.png" alt="Zynapse" class="logo-small">
                <h2>Create Account</h2>
                <p>Join Zynapse today</p>
            </div>

            <div class="auth-form-content">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="signupName" placeholder="Full Name" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-phone"></i>
                    <input type="tel" id="signupPhone" placeholder="Phone Number" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="signupEmail" placeholder="Email Address" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="signupPassword" placeholder="Password" required>
                    <i class="fas fa-eye toggle-password" id="toggleSignupPassword"></i>
                </div>

                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
                    <i class="fas fa-eye toggle-password" id="toggleSignupConfirmPassword"></i>
                </div>

                <div class="profile-upload-section">
                    <label class="upload-label">Profile Picture</label>
                    <div class="profile-upload-container">
                        <div class="upload-preview" id="profilePreview">
                            <div class="preview-placeholder">
                                <i class="fas fa-user-circle"></i>
                                <span>No image selected</span>
                                <p>Max 5MB</p>
                            </div>
                        </div>
                        <div class="upload-buttons">
                            <button class="btn-upload" id="uploadProfileBtn">
                                <i class="fas fa-upload"></i> Upload Photo
                            </button>
                            <button class="btn-remove" id="removeProfileBtn" style="display: none;">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                    <p class="upload-hint">Supported: JPG, PNG, GIF (Max 5MB)</p>
                </div>

                <input type="file" id="profileUpload" accept="image/*" style="display: none;">

                <div class="terms-agreement">
                    <label class="checkbox-container">
                        <input type="checkbox" id="agreeTerms" required>
                        <span class="checkmark"></span>
                        I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a>
                    </label>
                </div>

                <button class="btn-primary full-width" id="registerBtn">
                    <i class="fas fa-user-check"></i> Create Account
                </button>

                <div class="auth-divider">
                    <span>or continue with</span>
                </div>

                <button class="btn-google">
                    <i class="fab fa-google"></i> Google
                </button>

                <div class="auth-switch">
                    Already have an account? <a href="#" class="link" id="switchToLogin">Sign In</a>
                </div>
            </div>
        </div>

        <!-- Login Form -->
        <div class="auth-form" id="loginForm" style="display: none;">
            <div class="auth-header">
                <button class="back-btn" id="backToWelcomeFromLogin">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <img src="zynaps.png" alt="Zynapse" class="logo-small">
                <h2>Welcome Back</h2>
                <p>Sign in to your account</p>
            </div>

            <div class="auth-form-content">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="loginEmail" placeholder="Email Address" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPassword" placeholder="Password" required>
                    <i class="fas fa-eye toggle-password" id="toggleLoginPassword"></i>
                </div>

                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        Remember me
                    </label>
                    <a href="#" class="link" id="forgotPassword">Forgot Password?</a>
                </div>

                <button class="btn-primary full-width" id="signinBtn">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>

                <div class="auth-divider">
                    <span>or continue with</span>
                </div>

                <button class="btn-google">
                    <i class="fab fa-google"></i> Google
                </button>

                <div class="auth-switch">
                    Don't have an account? <a href="#" class="link" id="switchToSignup">Create Account</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="app.js"></script>
    <script>
        // Authentication page specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            const welcomeScreen = document.getElementById('welcomeScreen');
            const signupForm = document.getElementById('signupForm');
            const loginForm = document.getElementById('loginForm');
            const signupBtn = document.getElementById('signupBtn');
            const loginBtn = document.getElementById('loginBtn');
            const backToWelcomeFromSignup = document.getElementById('backToWelcomeFromSignup');
            const backToWelcomeFromLogin = document.getElementById('backToWelcomeFromLogin');
            const switchToLogin = document.getElementById('switchToLogin');
            const switchToSignup = document.getElementById('switchToSignup');
            const registerBtn = document.getElementById('registerBtn');
            const signinBtn = document.getElementById('signinBtn');
            const profileUpload = document.getElementById('profileUpload');
            const uploadProfileBtn = document.getElementById('uploadProfileBtn');
            const removeProfileBtn = document.getElementById('removeProfileBtn');
            const profilePreview = document.getElementById('profilePreview');
            
            // Toggle password visibility
            document.querySelectorAll('.toggle-password').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                    input.setAttribute('type', type);
                    this.classList.toggle('fa-eye');
                    this.classList.toggle('fa-eye-slash');
                });
            });

            // Show signup form
            signupBtn.addEventListener('click', () => {
                welcomeScreen.style.display = 'none';
                signupForm.style.display = 'block';
                loginForm.style.display = 'none';
            });

            // Show login form
            loginBtn.addEventListener('click', () => {
                welcomeScreen.style.display = 'none';
                signupForm.style.display = 'none';
                loginForm.style.display = 'block';
            });

            // Back to welcome from signup
            backToWelcomeFromSignup.addEventListener('click', () => {
                signupForm.style.display = 'none';
                welcomeScreen.style.display = 'block';
            });

            // Back to welcome from login
            backToWelcomeFromLogin.addEventListener('click', () => {
                loginForm.style.display = 'none';
                welcomeScreen.style.display = 'block';
            });

            // Switch to login from signup
            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                signupForm.style.display = 'none';
                loginForm.style.display = 'block';
            });

            // Switch to signup from login
            switchToSignup.addEventListener('click', (e) => {
                e.preventDefault();
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
            });

            // Profile picture upload
            uploadProfileBtn.addEventListener('click', () => {
                profileUpload.click();
            });

            profileUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) {
                        showToast('File size must be less than 5MB', 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        profilePreview.innerHTML = `<img src="${e.target.result}" alt="Profile Preview">`;
                        removeProfileBtn.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });

            removeProfileBtn.addEventListener('click', () => {
                profilePreview.innerHTML = `
                    <div class="preview-placeholder">
                        <i class="fas fa-user-circle"></i>
                        <span>No image selected</span>
                        <p>Max 5MB</p>
                    </div>
                `;
                profileUpload.value = '';
                removeProfileBtn.style.display = 'none';
            });

            // Hide loading screen after 1.5 seconds
            setTimeout(() => {
                loadingScreen.classList.add('hidden');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1500);
        });
    </script>
</body>
</html>
